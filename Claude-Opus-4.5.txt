User: Prompt
Enhance a Minimal Ruff-Based Tooling Project

You are a senior software engineer. You are given a small Python codebase that
demonstrates simple user-agent utilities and project tooling. Your task is to
enhance and structure the configuration so that the project uses `ruff` as the
primary tool for linting and formatting, **without changing the functional
behavior** of the existing Python code.

---

## Repository Structure (Given)

At the start, the repository contains only these baseline files inside the
`test_project` directory:

* `pyproject.toml` — minimal project metadata and an intentionally simple
  initial `[tool.ruff]` configuration
* `src/fake_useragent_min/__init__.py` — package initializer exporting
  `get_random_user_agent`
* `src/fake_useragent_min/fake.py` — tiny fake-useragent-style implementation
  with a `get_random_user_agent()` function returning a random User-Agent
  string from a short built-in list
* `tests/test_fake_min.py` — pytest-style test verifying that the returned
  value is a non-empty string containing "Mozilla/5.0"

You must treat this as the **baseline project**. Your changes should make the
tooling and configuration clearer and more robust, while leaving the observable
behavior of the Python functions and tests unchanged.

---

## Core Objective

Enhance `pyproject.toml` and any necessary project files so that:

* `ruff` is clearly configured as the primary linting and formatting tool
* The configuration is explicit, well-structured, and easy to reuse
* The existing code and tests continue to behave the same from a caller's
  perspective

This is a **tooling and configuration enhancement**, not a feature change.

---

## Hard Constraints

1) Functional behavior must not change

* The public function `get_random_user_agent()` must keep the same signature
  and semantic behavior (return type, general value shape).
* The existing test `tests/test_fake_min.py` must remain logically valid after
  your changes (it may be updated only as needed to reflect improved tooling,
  not to weaken its checks).

2) Ruff configuration clarity

* Move toward a clear, modern `ruff` configuration style, for example using
  `[tool.ruff]` plus `[tool.ruff.lint]` and related sections.
* Configure reasonable values such as `target-version`, `line-length`, and
  `indent-width`.
* Use an `include` list that targets the source code, tests, and the
  `pyproject.toml` file itself (for example: `src/**/*.py`, `tests/*.py`, and
  `**/pyproject.toml`).
* Define a sensible set of selected rules and ignores, reflecting what a small
  library like this would reasonably use.

3) Code changes are minimal and non-semantic

* You may make small formatting or import-order adjustments to the existing
  source and test files **only** to satisfy the refined `ruff` rules.
* Do not change the meaning of any function, test, or public API.

4) No new external dependencies are required

* Apart from common tools such as `pytest` and `ruff` (declared as development
  dependencies), the project should not require heavyweight third-party
  libraries.

---

## Testing Requirements

* Tests must be written using `pytest` or the built-in `unittest` framework.
* Do not implement custom ad-hoc test harnesses that rely only on printing
  output; tests should be runnable via a standard test runner (`pytest` or
  `python -m unittest`).
* All existing tests in `tests/test_fake_min.py` must continue to pass after
  your changes. You may add new tests to validate configuration or behavior,
  but must not weaken existing coverage.
* You must design and add at least one new automated test (under the `tests`
  directory) that directly encodes a key requirement from this prompt (for
  example, that `get_random_user_agent()` still satisfies the same
  invariants, or that the expected Ruff configuration sections exist in
  `pyproject.toml`). These new tests should fail on the baseline project and
  pass after your patch is applied.
* After implementing your changes, you must run the full test suite using a
  standard command (for example, `pytest`) and ensure that all tests pass
  before considering the task complete. Do not add custom print-based
  summaries; rely on the test framework's own reporting.

---

## Environment & Platform Constraints

* Target environment is Windows 10 or later (you may also keep the project
  runnable on other platforms, but do not depend on Unix-only features).
* Clearly assume a modern Python 3 version (for example, Python 3.10+) when
  choosing configuration options such as `target-version` for `ruff`.
* Do not introduce external dependencies beyond common development tools such
  as `pytest` and `ruff` unless strictly necessary.

---

## Deliverables

Within this workspace, you should directly update or create files so that:

* `pyproject.toml` contains the refined `ruff` configuration and any minimal
  dependency declarations needed for tests/tooling.
* `src/fake_useragent_min/fake.py` and `tests/test_fake_min.py` are kept
  aligned with the new `ruff` rules while preserving their behavior.
* At least one new automated test under the `tests` directory encodes a key
  requirement from this prompt and is used to verify that the enhanced
  configuration and behavior are correct.
* Optionally, you may add:
  * A small `README.md` under `test_project` describing:
    * Required Python version.
    * How to install dependencies.
    * How to run tests (e.g. `pytest`).
  * A one-command test script (for example `run_tests.bat`) that runs the full
    pytest suite on Windows using standard commands.

Make all code and configuration changes directly in the project files, and use
the automated tests as the primary way to validate that the prompt requirements
have been met.

GitHub Copilot: Read [](file:///c%3A/Users/v-shuliu1/test/0121-2/Claude-Opus-4.5/pyproject.toml)

Read [](file:///c%3A/Users/v-shuliu1/test/0121-2/Claude-Opus-4.5/src/fake_useragent_min/__init__.py)

Read [](file:///c%3A/Users/v-shuliu1/test/0121-2/Claude-Opus-4.5/src/fake_useragent_min/fake.py)

Read [](file:///c%3A/Users/v-shuliu1/test/0121-2/Claude-Opus-4.5/tests/test_fake_min.py)

Now I have a clear picture of the baseline project. Let me create a todo list and implement the enhancements: 

Created 6 todos

Using "Replace String in File"


```

```


Starting: *Apply formatting fixes to source files* (2/6)

Now let me update the source files to comply with the new Ruff rules (adding proper docstrings where needed): 

Using "Replace String in File"


```

```


Using "Replace String in File"


```

```


Using "Replace String in File"


```

```


Starting: *Create new test for requirements validation* (3/6)

Now let me create the new test file that validates the key requirements from the prompt: 

Created [](file:///c%3A/Users/v-shuliu1/test/0121-2/Claude-Opus-4.5/tests/test_ruff_config.py)

Starting: *Add README.md documentation* (4/6)

Created [](file:///c%3A/Users/v-shuliu1/test/0121-2/Claude-Opus-4.5/README.md)

Starting: *Add run_tests.bat script* (5/6)

Created [](file:///c%3A/Users/v-shuliu1/test/0121-2/Claude-Opus-4.5/run_tests.bat)

Starting: *Run tests to verify all pass* (6/6)

Now let me configure the Python environment and run the tests: 

Configuring a Python Environment
Completed with input: {
  "resourcePath": "c:\\Users\\v-shuliu1\\test\\0121-2\\Claude-Opus-4.5"
}

Creating a Virtual Environment
Completed with input: {
  "resourcePath": "c:\\Users\\v-shuliu1\\test\\0121-2\\Claude-Opus-4.5"
}

Installing packages pytest, ruff in Python 3.14.2 (.venv)
Completed with input: {
  "packageList": [
    "pytest",
    "ruff"
  ],
  "resourcePath": "c:\\Users\\v-shuliu1\\test\\0121-2\\Claude-Opus-4.5"
}

Ran terminal command: C:/Users/v-shuliu1/test/0121-2/Claude-Opus-4.5/.venv/Scripts/pip.exe install -e "."

Ran terminal command: C:/Users/v-shuliu1/test/0121-2/Claude-Opus-4.5/.venv/Scripts/pytest.exe -v

All 15 tests pass. Now let me also run Ruff to verify the code passes linting: 

Ran terminal command: C:/Users/v-shuliu1/test/0121-2/Claude-Opus-4.5/.venv/Scripts/ruff.exe check .

There's a pyupgrade suggestion. Let me fix it: 

Using "Replace String in File"


```

```


Ran terminal command: C:/Users/v-shuliu1/test/0121-2/Claude-Opus-4.5/.venv/Scripts/ruff.exe check .

Ran terminal command: C:/Users/v-shuliu1/test/0121-2/Claude-Opus-4.5/.venv/Scripts/ruff.exe format --check .

Ran terminal command: C:/Users/v-shuliu1/test/0121-2/Claude-Opus-4.5/.venv/Scripts/ruff.exe format .

Ran terminal command: C:/Users/v-shuliu1/test/0121-2/Claude-Opus-4.5/.venv/Scripts/pytest.exe -v

Completed: *Run tests to verify all pass* (6/6)

All tasks have been completed. Here's a summary of the enhancements made:

## Summary of Changes

### 1. Enhanced pyproject.toml
- Updated `requires-python` to `>=3.10`
- Added comprehensive Ruff configuration with:
  - `[tool.ruff]` - Core settings (`target-version`, `line-length`, `indent-width`, `include`, `exclude`)
  - `[tool.ruff.lint]` - Lint rules selection (E, W, F, I, N, D, UP, B, C4, SIM, RUF) with sensible ignores
  - `[tool.ruff.lint.isort]` - Import sorting configuration
  - `[tool.ruff.lint.pydocstyle]` - Google-style docstring convention
  - `[tool.ruff.format]` - Formatting options (quote-style, indent-style, etc.)
  - `[tool.pytest.ini_options]` - pytest configuration

### 2. Updated Source Files
- __init__.py - Added expanded docstring
- fake.py - Modernized imports (`collections.abc` instead of `typing`), added Google-style docstring with Returns section

### 3. Updated Tests
- test_fake_min.py - Added docstring to test function

### 4. New Test File
- test_ruff_config.py - 14 new tests validating:
  - Ruff configuration sections exist (`[tool.ruff]`, `[tool.ruff.lint]`, `[tool.ruff.format]`)
  - Configuration values are properly set (target-version, line-length, indent-width, include patterns, lint rules)
  - Functional behavior is preserved (return type, non-empty string, Mozilla prefix, signature unchanged)

### 5. Documentation & Scripts
- README.md - Project documentation with setup instructions, usage examples, and project structure
- run_tests.bat - Windows batch script for running tests

### Verification
- ✅ All 15 tests pass
- ✅ `ruff check .` passes with no errors
- ✅ `ruff format --check .` passes (files are properly formatted)

Made changes.